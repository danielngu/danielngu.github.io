<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Apr</title>
  <meta name="description" content="Contents">

  <link rel="stylesheet" href="/log/assets/base16.dark.css">
  <link rel="canonical" href="http://localhost:4000/log/2014/04/01/Apr.html">
  <link rel="alternate" type="application/rss+xml" title="Daniel Ngu&#39;s Log" href="/log/feed.xml">

  

</head>


  <body>

    <header class="site-header" role="banner">

  <div class="wrapper">
    
    
    <a class="site-title" href="/log/">Daniel Ngu&#39;s Log</a>
  
    
      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
              <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
              <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          
            
            
          
            
            
          
            
            
          
            
            
            <a class="page-link" href="/log/tags/">Tags</a>
            
          
            
            
          
        </div>
      </nav>
    
  </div>
</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="https://schema.org/BlogPosting">

  <header class="post-header">
    <p class="post-meta">
      </p>
  </header>

  <div class="post-content" itemprop="articleBody">
	  
	  
	  <nobr>( <a href="/log/tags/#linux">linux</a> )</nobr>
	  

	  <p>
	  <br/>
    <p><strong>Contents</strong></p>

<ol>
  <li><a href="#arch-1">Arch Installation</a></li>
  <li><a href="#arch-2">Arch Customisation</a></li>
  <li><a href="#dotfiles-1">Dotfiles</a></li>
  <li><a href="#email-1">Email Setup</a></li>
  <li><a href="#server-1">Server Installation</a></li>
  <li><a href="#samba-1">Samba Setup</a></li>
  <li><a href="#dlna-1">DLNA</a></li>
</ol>

<h3 id="sun-apr-20-2014">Sun, Apr 20, 2014</h3>

<h3 id="arch-installation--setup"><a name="arch-1"></a>ARCH INSTALLATION / SETUP</h3>

<h4 id="media">Media</h4>

<p>ISO available via Arch <a href="https://www.archlinux.org/download/">download</a> page.</p>

<p>Installation Guide available there as well or as text file after booting up the 
ISO.</p>

<h4 id="keyboard">Keyboard</h4>

<p>I found this optional but for completeness:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>loadkeys us</code></pre></figure>

<h4 id="partition">Partition</h4>

<p>I opted for simpler partitioning, keeping my home directory separate.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>fdisk <span class="nt">-l</span>			<span class="c"># List parition tables</span>
<span class="nv">$ </span>gdisk /dev/sda		<span class="c"># To partition /dev/sda</span>
<span class="nv">$ </span>o				<span class="c"># Either new or start over</span>
<span class="nv">$ </span>y				<span class="c"># Accept</span>
<span class="nv">$ </span>n				<span class="c"># Create new partition</span>
<span class="nv">$ </span>Enter				<span class="c"># Accept default partition number</span>
<span class="nv">$ </span>Enter				<span class="c"># Accept default first sector</span>
<span class="nv">$ </span>+100G				<span class="c"># Allocated 100GB for home partition</span>
<span class="nv">$ </span>8302				<span class="c"># Set type of partition or L to list</span></code></pre></figure>

<p>Similarly, repeat 5 to 8 to create the rest of the partitions. In my case, I’ve
created /dev/sda2 for swap with 8200 and /dev/sda3 for / with 8300 using the
remaining available.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>w				<span class="c"># Write changes</span>
<span class="nv">$ </span>y				<span class="c"># Accept</span></code></pre></figure>

<p>Alternatively, use cgdisk or cfdisk if dual boot with Windows.</p>

<h4 id="format">Format</h4>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>mkfs.ext4 /dev/sda1		<span class="c"># Format home partition</span>
<span class="nv">$ </span>mkswap /dev/sda2		<span class="c"># Format swap partition</span>
<span class="nv">$ </span>mkfs.ext4 /dev/sda3		<span class="c"># Format / partition</span></code></pre></figure>

<h4 id="mount">Mount</h4>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>swapon /dev/sda2
<span class="nv">$ </span>mount /dev/sda3 /mnt
<span class="nv">$ </span><span class="nb">mkdir</span> <span class="nt">-pv</span> /mnt/home
<span class="nv">$ </span>mount /dev/sda1 /mnt/home</code></pre></figure>

<h4 id="wireless">Wireless</h4>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>wifi-menu</code></pre></figure>

<h4 id="install-base-system">Install Base System</h4>

<p>Edit /etc/pacman.d/mirrorlist so that the preferred mirror is on top of the 
list.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>pacstrap /mnt base</code></pre></figure>

<h4 id="configure-system">Configure System</h4>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>genfstab <span class="nt">-p</span> /mnt <span class="o">&gt;&gt;</span> /mnt/etc/fstab	<span class="c"># Generate fstab</span>
<span class="nv">$ </span>arch-chroot /mnt			<span class="c"># chroot</span></code></pre></figure>

<p>Add hostname to <em>/etc/hostname</em> and <em>/etc/hosts</em>. For <em>/etc/hosts</em>, append it to the 
127.0.0.1 line.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">ln</span> <span class="nt">-s</span> /usr/share/zoneinfo/Pacific/Auckland /etc/localtime</code></pre></figure>

<p>Uncomment the locale in <em>/etc/locale.gen</em></p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>locale-gen				<span class="c"># Generate locale </span></code></pre></figure>

<p>Set locale preference by adding <em>LANG=”en_NZ.UTF-8”</em> to <em>/etc/locale.conf</em></p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>mkinitcpio <span class="nt">-p</span> linux			<span class="c"># Create RAM disk</span>
<span class="nv">$ </span>passwd				<span class="c"># Set root password</span></code></pre></figure>

<h4 id="install-boot-loader">Install Boot Loader</h4>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>pacman <span class="nt">-S</span> gdisk			<span class="c"># Prerequisite</span>
<span class="nv">$ </span>pacman <span class="nt">-S</span> syslinux
<span class="nv">$ </span>syslinux-install_update <span class="nt">-i</span> <span class="nt">-a</span> <span class="nt">-m</span></code></pre></figure>

<p>Or</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>pacman <span class="nt">-S</span> intel-ucode				<span class="c"># If it's an Intel CPU</span>
<span class="nv">$ </span>pacman <span class="nt">-S</span> grub os-prober
<span class="nv">$ </span>grub-install <span class="nt">--recheck</span> /dev/sda		<span class="c"># Install bootloader</span>
<span class="nv">$ </span>grub-mkconfig <span class="nt">-o</span> /boot/grub/grub.cfg		<span class="c"># Generate grub.cfg</span></code></pre></figure>

<p>Grub is for MBR only.</p>

<h4 id="additional-install">Additional Install</h4>

<p>Wireless connection will be setup within Gnome later so in the interim, install
the following to continue using wifi-menu after booting in to the new system.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>pacman <span class="nt">-S</span> dialog wpa_supplicant		<span class="c"># Required by wifi-menu</span></code></pre></figure>

<h4 id="umount-and-reboot">Umount and Reboot</h4>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">exit</span>						<span class="c"># Exit from chroot environment</span>
<span class="nv">$ </span>umount <span class="nt">-R</span> /mnt
<span class="nv">$ </span>reboot</code></pre></figure>

<h4 id="create-new-user">Create New User</h4>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>useradd <span class="nt">-m</span> <span class="nt">-G</span> wheel <span class="nt">-s</span> /bin/bash daniel
<span class="nv">$ </span>passwd daniel
<span class="nv">$ </span>usermod <span class="nt">-a</span> <span class="nt">-G</span> audio,network,power,scanner,storage,systemd-journal,video daniel</code></pre></figure>

<p>The above creates a new user with home directory, change password and add user
to additional groups.</p>

<h4 id="sudo">Sudo</h4>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>pacman <span class="nt">-S</span> <span class="nb">sudo</span></code></pre></figure>

<p>Run visudo, edit it to restrict sudo to specific group or user.</p>

<h4 id="gnome">Gnome</h4>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>pacman <span class="nt">-S</span> gnome</code></pre></figure>

<p>For Nvidia GPU, choose nvidia-libgl when prompted. After that install the nvidia
package as well.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>pacman <span class="nt">-S</span> nvidia
<span class="nv">$ </span><span class="nb">sudo </span>systemctl <span class="nb">enable </span>gdm</code></pre></figure>

<p>Updated:</p>

<p>Since Gnome 3.14 update, I’ve replaced  Nvidia proprietary driver with Nouveau open source driver for NVIDIA graphic cards instead due to compatibility issues.</p>

<p>Boot up Arch ISO then chroot to carry out the following:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>pacman <span class="nt">-Rdds</span> nvidia nvidia-utils nvidia-libgl libvdpau libcl
<span class="nv">$ </span><span class="nb">rm</span> /etc/X11/xorg.conf
<span class="nv">$ </span>pacman <span class="nt">-Rdds</span> xf86-input-evdev
<span class="nv">$ </span>pacman <span class="nt">-S</span> xorg-server mesa
<span class="nv">$ </span>pacman <span class="nt">-S</span> xf86-video-nouveau
<span class="nv">$ </span>pacman <span class="nt">-S</span> mesa-libgl</code></pre></figure>

<h4 id="touchpad">Touchpad</h4>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>pacman <span class="nt">-S</span> xf86-input-synaptics</code></pre></figure>

<p>Launch dconf editor, edit org.gnome.settings-daemon.peripherals.touchpad:<br />
Set scroll-method to edge-scrolling.</p>

<h4 id="wireless-network">Wireless Network</h4>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>pacman <span class="nt">-S</span> wireless_tools
<span class="nv">$ </span><span class="nb">sudo </span>pacman <span class="nt">-S</span> networkmanager
<span class="nv">$ </span><span class="nb">sudo </span>pacman <span class="nt">-S</span> network-manager-applet
<span class="nv">$ </span><span class="nb">sudo </span>systemctl <span class="nb">enable </span>NetworkManager.service        <span class="c"># Enable Network Manager</span></code></pre></figure>

<p>Disable dhcpcd since Network Manager will be handling the dhcpcd instead.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>systemctl disable dhcpcd.service
<span class="nv">$ </span><span class="nb">sudo </span>systemctl disable dhcpcd@.service</code></pre></figure>

<p>Alternatively, <em>ip address</em> to get the interface name and do *dhcpcd <name>* to 
enable it manually or *sudo systemctl enable dhcpcd.service* to enable it as a
service. Especially in case of using ethernet during installation or not
using/installing Network Manager.</name></p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>systemctl <span class="nb">enable </span>wpa_supplicant.service</code></pre></figure>

<h4 id="aur-and-yaourt">AUR and Yaourt</h4>

<p>These are required to install AUR and Yaourt packages.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>pacman <span class="nt">-S</span> <span class="nt">--needed</span> base-devel</code></pre></figure>

<p>To install <a href="https://aur.archlinux.org/">AUR</a> packages, extract tarball, 
run makepkg -s followed by pacman -U against the generated .pkg.tar.xz 
package to install it.</p>

<p>Yaourt Prerequisite:<br />
<a href="https://aur.archlinux.org/packages/package-query/">package-query</a> 
from AUR.</p>

<p>Install Yaourt:<br />
<a href="https://aur.archlinux.org/packages/yaourt/">yaourt</a> from AUR.</p>

<h4 id="fonts">Fonts</h4>

<p>Add this to <em>~/.config/fontconfig/fonts.conf</em> for better font rendering.</p>

<figure class="highlight"><pre><code class="language-vim" data-lang="vim"><span class="p">&lt;</span><span class="k">match</span> target<span class="p">=</span><span class="s2">"font"</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="k">edit</span> <span class="k">mode</span><span class="p">=</span><span class="s2">"assign"</span> name<span class="p">=</span><span class="s2">"autohint"</span><span class="p">&gt;&lt;</span>bool<span class="p">&gt;</span>true<span class="p">&lt;</span><span class="sr">/bool&gt;&lt;/</span><span class="k">edit</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="k">edit</span> <span class="k">mode</span><span class="p">=</span><span class="s2">"assign"</span> name<span class="p">=</span><span class="s2">"hinting"</span><span class="p">&gt;&lt;</span>bool<span class="p">&gt;</span>true<span class="p">&lt;</span><span class="sr">/bool&gt;&lt;/</span><span class="k">edit</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="k">edit</span> <span class="k">mode</span><span class="p">=</span><span class="s2">"assign"</span> name<span class="p">=</span><span class="s2">"hintstyle"</span><span class="p">&gt;&lt;</span><span class="k">const</span><span class="p">&gt;</span>hintslight<span class="p">&lt;</span><span class="sr">/const&gt;&lt;/</span><span class="k">edit</span><span class="p">&gt;</span>
<span class="p">&lt;</span>/<span class="k">match</span><span class="p">&gt;</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>pacman <span class="nt">-S</span> gsfonts
<span class="nv">$ </span>yaourt <span class="nt">-S</span> ttf-dejavu ttf-droid ttf-bitstream-vera ttf-cheapskate <span class="se">\</span>
<span class="o">&gt;</span> ttf-freefont ttf-inconsolata ttf-indic-otf ttf-junicode ttf-liberation <span class="se">\</span>
<span class="o">&gt;</span> ttf-linux-libertine</code></pre></figure>

<p>From AUR:<br />
<a href="https://aur.archlinux.org/packages/ttf-ms-fonts/">ttf-ms-fonts</a></p>

<h4 id="audio">Audio</h4>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>pacman <span class="nt">-S</span> alsa-utils
<span class="nv">$ </span>amixer sset Master unmute        <span class="c"># ALSA comes muted by default.</span></code></pre></figure>

<h4 id="multimedia">Multimedia</h4>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>pacman <span class="nt">-S</span> gst-libav gst-plugins-ugly
<span class="nv">$ </span><span class="nb">sudo </span>pacman <span class="nt">-Sy</span> <span class="nt">--needed</span> totem <span class="se">\</span>
<span class="o">&gt;</span> gstreamer0.10-<span class="o">{{</span>bad,good,ugly,base<span class="o">}{</span>,-plugins<span class="o">}</span>,ffmpeg<span class="o">}</span>
<span class="nv">$ </span><span class="nb">sudo </span>pacman <span class="nt">-S</span> x264
<span class="nv">$ </span><span class="nb">sudo </span>pacman <span class="nt">-S</span> ffmpeg</code></pre></figure>

<h4 id="additional-install-1">Additional Install</h4>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>pacman <span class="nt">-S</span> brasero
<span class="nv">$ </span><span class="nb">sudo </span>pacman <span class="nt">-S</span> chromium
<span class="nv">$ </span><span class="nb">sudo </span>pacman <span class="nt">-S</span> file-roller
<span class="nv">$ </span><span class="nb">sudo </span>pacman <span class="nt">-S</span> gedit
<span class="nv">$ </span><span class="nb">sudo </span>pacman <span class="nt">-S</span> gimp
<span class="nv">$ </span><span class="nb">sudo </span>pacman <span class="nt">-S</span> git 
<span class="nv">$ </span><span class="nb">sudo </span>pacman <span class="nt">-S</span> gnome-tweak-tool
<span class="nv">$ </span><span class="nb">sudo </span>pacman <span class="nt">-S</span> gparted
<span class="nv">$ </span><span class="nb">sudo </span>pacman <span class="nt">-S</span> gvfs-mtp
<span class="nv">$ </span><span class="nb">sudo </span>pacman <span class="nt">-S</span> gvfs-smb
<span class="nv">$ </span><span class="nb">sudo </span>pacman <span class="nt">-S</span> irssi
<span class="nv">$ </span><span class="nb">sudo </span>pacman <span class="nt">-S</span> handbrake
<span class="nv">$ </span><span class="nb">sudo </span>pacman <span class="nt">-S</span> libreoffice
<span class="nv">$ </span><span class="nb">sudo </span>pacman <span class="nt">-S</span> mutt
<span class="nv">$ </span><span class="nb">sudo </span>pacman <span class="nt">-S</span> msmtp
<span class="nv">$ </span><span class="nb">sudo </span>pacman <span class="nt">-S</span> net-tools
<span class="nv">$ </span><span class="nb">sudo </span>pacman <span class="nt">-S</span> networkmanager-openconnect openconnect        <span class="c"># VPN</span>
<span class="nv">$ </span><span class="nb">sudo </span>pacman <span class="nt">-S</span> offlineimap
<span class="nv">$ </span><span class="nb">sudo </span>pacman <span class="nt">-S</span> openssh
<span class="nv">$ </span><span class="nb">sudo </span>pacman <span class="nt">-S</span> pulseaudio-alsa
<span class="nv">$ </span><span class="nb">sudo </span>pacman <span class="nt">-S</span> seahorse
<span class="nv">$ </span><span class="nb">sudo </span>pacman <span class="nt">-S</span> rhythmbox
<span class="nv">$ </span><span class="nb">sudo </span>pacman <span class="nt">-S</span> vim
<span class="nv">$ </span><span class="nb">sudo </span>pacman <span class="nt">-S</span> vlc
<span class="nv">$ </span><span class="nb">sudo </span>pacman <span class="nt">-S</span> xorg-xrandr                                   <span class="c"># Optional</span>
<span class="nv">$ </span><span class="nb">sudo </span>pacman <span class="nt">-S</span> xorg-server-utils                             <span class="c"># Optional</span></code></pre></figure>

<p>Updated:</p>

<p>xorg-server-utils has been replaced by xorg-apps</p>

<p>From AUR:<br />
<a href="http://goo.gl/9bi8Gr">chromium-pepper-flash</a><br />
<del><a href="https://aur.archlinux.org/packages/chromium-libpdf/">chromium-libpdf</a><br /></del>
<a href="https://aur.archlinux.org/packages/etherwake/">etherwake</a><br />
<del><a href="https://aur.archlinux.org/packages/realvnc-viewer/">realvnc-viewer</a></del></p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>systemctl <span class="nb">enable </span>sshd.service</code></pre></figure>

<p><br /></p>
<h3 id="mon-apr-21-2014">Mon, Apr 21, 2014</h3>

<h3 id="arch-customisation"><a name="arch-2"></a>ARCH CUSTOMISATION</h3>

<h4 id="numix-theme">Numix Theme</h4>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>pacman <span class="nt">-S</span> numix-themes</code></pre></figure>

<p>From AUR:<br />
<a href="http://goo.gl/alI4VE">numix-icon-theme-git</a><br />
<a href="http://goo.gl/QIqWh2">numix-circle-icon-theme-git</a></p>

<h4 id="gnome-dash-to-dock">Gnome Dash to Dock</h4>

<p>From AUR:<br />
<a href="http://goo.gl/YRSDX6">gnome-shell-extension-dash-to-dock</a></p>

<h4 id="gnome-tweak-tool">Gnome Tweak Tool</h4>

<p>Appearance-&gt;Theme:<br />
Set Window and GTK+ to Numix<br />
Set Icons to Numix-Circle</p>

<p>Extensions:<br />
Enable Dash to Dock</p>

<p>Windows-&gt;Titlebar Buttons:<br />
Enable Maximize and Minimize</p>

<h4 id="gnome-terminal">Gnome Terminal</h4>

<p>Clone default profile.</p>

<p>Customise General:<br />
Deselect “Use the system fixed width font” and change the default 
monospace 12 to 10.<br />
Decrease default terminal size from 80x24 to 80x20.</p>

<p>Customise Colors:<br />
Deselect “Use colors from system theme”.<br />
Use Green on Black scheme.<br />
<br /></p>
<h3 id="fri-apr-25-2014">Fri, Apr 25, 2014</h3>

<h3 id="dotfiles"><a name="dotfiles-1"></a>DOTFILES</h3>

<h4 id="linux">Linux</h4>

<p><em>~/.bashrc</em></p>

<figure class="highlight"><pre><code class="language-vim" data-lang="vim">PS1<span class="p">=</span><span class="s1">'\u@\h:\w\$ '</span>

HISTSIZE<span class="p">=</span><span class="m">8000</span>
HISTFILESIZE<span class="p">=</span><span class="m">8000</span>

PATH<span class="p">=</span>$PATH<span class="p">:</span>$HOME<span class="sr">/Documents/</span><span class="nb">bin</span>

<span class="k">source</span> <span class="s2">"$HOME/.rvm/scripts/rvm"</span></code></pre></figure>

<p><em>~/.vimrc</em></p>

<figure class="highlight"><pre><code class="language-vim" data-lang="vim"><span class="k">filetype</span> plugin <span class="nb">indent</span> <span class="k">on</span>

<span class="k">set</span> <span class="nb">tabstop</span><span class="p">=</span><span class="m">8</span> <span class="nb">softtabstop</span><span class="p">=</span><span class="m">8</span> <span class="nb">shiftwidth</span><span class="p">=</span><span class="m">8</span> <span class="nb">noexpandtab</span>
<span class="k">set</span> <span class="nb">textwidth</span><span class="p">=</span><span class="m">80</span>
<span class="k">set</span> <span class="nb">formatoptions</span><span class="p">+=</span><span class="k">t</span>

<span class="nb">syntax</span> <span class="k">on</span>

<span class="k">set</span> <span class="nb">spelllang</span><span class="p">=</span>en_nz
<span class="k">set</span> <span class="nb">ruler</span> <span class="nb">laststatus</span><span class="p">=</span><span class="m">2</span> <span class="k">number</span> <span class="nb">title</span> <span class="nb">hlsearch</span></code></pre></figure>

<h4 id="mac">Mac</h4>

<p><em>~/.bashrc</em></p>

<figure class="highlight"><pre><code class="language-vim" data-lang="vim">HISTSIZE<span class="p">=</span><span class="m">8000</span>
HISTFILESIZE<span class="p">=</span><span class="m">8000</span>

PATH<span class="p">=</span>$PATH<span class="p">:</span>$HOME<span class="sr">/Documents/</span><span class="nb">bin</span>

<span class="k">export</span> PATH<span class="p">=</span><span class="s2">"$PATH:$HOME/.rvm/bin"</span> # Add RVM <span class="k">to</span> PATH <span class="k">for</span> scripting

<span class="k">export</span> PS1<span class="p">=</span><span class="s1">'\u@\h:\w\$ '</span>

<span class="k">export</span> PROMPT_COMMAND<span class="p">=</span><span class="s1">'echo -ne "\033]0;$PWD\007"'</span></code></pre></figure>

<p>The RVM line is actually auto added as part of Octopress install
but included here for completeness.</p>

<p><em>~/.bash_profile</em></p>

<figure class="highlight"><pre><code class="language-vim" data-lang="vim"><span class="k">source</span> <span class="p">~</span>/<span class="p">.</span>bashrc</code></pre></figure>

<p><em>~/.vimrc</em></p>

<figure class="highlight"><pre><code class="language-vim" data-lang="vim"><span class="k">filetype</span> plugin <span class="nb">indent</span> <span class="k">on</span>

<span class="k">set</span> <span class="nb">tabstop</span><span class="p">=</span><span class="m">8</span> <span class="nb">softtabstop</span><span class="p">=</span><span class="m">8</span> <span class="nb">shiftwidth</span><span class="p">=</span><span class="m">8</span> <span class="nb">noexpandtab</span>
<span class="k">set</span> <span class="nb">textwidth</span><span class="p">=</span><span class="m">80</span>
<span class="k">set</span> <span class="nb">formatoptions</span><span class="p">+=</span><span class="k">t</span>

<span class="nb">syntax</span> <span class="k">on</span>

<span class="k">set</span> <span class="nb">spelllang</span><span class="p">=</span>en_nz
<span class="k">set</span> <span class="nb">ruler</span> <span class="nb">laststatus</span><span class="p">=</span><span class="m">2</span> <span class="k">number</span> <span class="nb">title</span> <span class="nb">hlsearch</span>
 
<span class="k">set</span> <span class="nb">background</span><span class="p">=</span><span class="nb">dark</span>
<span class="k">colorscheme</span> solarized

<span class="k">let</span> &amp;<span class="nb">titleold</span><span class="p">=</span><span class="nb">getcwd</span><span class="p">()</span></code></pre></figure>

<p><em>~/.vim/ftplugin/html.vim</em></p>

<figure class="highlight"><pre><code class="language-vim" data-lang="vim"> 
<span class="k">setlocal</span> <span class="nb">shiftwidth</span><span class="p">=</span><span class="m">2</span></code></pre></figure>

<h4 id="solarized-theme">Solarized Theme</h4>

<p>Download <a href="http://ethanschoonover.com/solarized/files/solarized.zip">theme</a>
and copy vim’s colors folder to ~/.vim<br />
<br /></p>
<h3 id="email-setup"><a name="email-1"></a>EMAIL SETUP</h3>

<h4 id="msmtp">msmtp</h4>

<p><em>~/.msmtprc</em></p>

<figure class="highlight"><pre><code class="language-vim" data-lang="vim"> 
account First
host smtp<span class="p">.</span>gmail<span class="p">.</span><span class="k">com</span>
port <span class="m">587</span>
protocol smtp
auth <span class="k">on</span>
from email<span class="p">-</span>address
user email<span class="p">-</span>address
password password
tls <span class="k">on</span>
tls_starttls <span class="k">on</span>
tls_trust_file <span class="sr">/etc/</span><span class="nb">ssl</span><span class="sr">/certs/</span><span class="k">ca</span><span class="p">-</span>certificates<span class="p">.</span>crt

account Second
host smtp<span class="p">.</span>gmail<span class="p">.</span><span class="k">com</span>
port <span class="m">587</span>
protocol smtp
auth <span class="k">on</span>
from email<span class="p">-</span>address
user email<span class="p">-</span>address
password password
tls <span class="k">on</span>
tls_starttls <span class="k">on</span>
tls_trust_file <span class="sr">/etc/</span><span class="nb">ssl</span><span class="sr">/certs/</span><span class="k">ca</span><span class="p">-</span>certificates<span class="p">.</span>crt

account default <span class="p">:</span> First</code></pre></figure>

<h4 id="offlineimap">Offlineimap</h4>

<p><em>~/.offlineimaprc</em></p>

<figure class="highlight"><pre><code class="language-vim" data-lang="vim"> 
<span class="p">[</span>general<span class="p">]</span>
ui <span class="p">=</span> ttyui
accounts <span class="p">=</span> First<span class="p">,</span> Second

<span class="p">[</span>Account First<span class="p">]</span>
localrepository <span class="p">=</span> First<span class="p">-</span>Local
remoterepository <span class="p">=</span> First<span class="p">-</span>Remote

<span class="p">[</span>Repository First<span class="p">-</span>Local<span class="p">]</span>
<span class="nb">type</span> <span class="p">=</span> Maildir
localfolders <span class="p">=</span> <span class="p">~</span><span class="sr">/Mail/</span>First

<span class="p">[</span>Repository First<span class="p">-</span>Remote<span class="p">]</span>
<span class="nb">type</span> <span class="p">=</span> Gmail
remoteuser <span class="p">=</span> email<span class="p">-</span>address
remotepass <span class="p">=</span> password
realdelete <span class="p">=</span> no
maxconnections <span class="p">=</span> <span class="m">3</span>
sslcacertfile <span class="p">=</span> <span class="sr">/etc/</span><span class="nb">ssl</span><span class="sr">/certs/</span><span class="k">ca</span><span class="p">-</span>certificates<span class="p">.</span>crt

<span class="p">[</span>Account Second<span class="p">]</span>
localrepository <span class="p">=</span> Second<span class="p">-</span>Local
remoterepository <span class="p">=</span> Second<span class="p">-</span>Remote

<span class="p">[</span>Repository Second<span class="p">-</span>Local<span class="p">]</span>
<span class="nb">type</span> <span class="p">=</span> Maildir
localfolders <span class="p">=</span> <span class="p">~</span><span class="sr">/Mail/</span>Second

<span class="p">[</span>Repository Second<span class="p">-</span>Remote<span class="p">]</span>
<span class="nb">type</span> <span class="p">=</span> Gmail
remoteuser <span class="p">=</span> email<span class="p">-</span>address
remotepass <span class="p">=</span> password
realdelete <span class="p">=</span> no
maxconnections <span class="p">=</span> <span class="m">3</span>
sslcacertfile <span class="p">=</span> <span class="sr">/etc/</span><span class="nb">ssl</span><span class="sr">/certs/</span><span class="k">ca</span><span class="p">-</span>certificates<span class="p">.</span>crt</code></pre></figure>

<p>Mac:<br />
For both <em>~/.msmtprc</em> and <em>~/.offlineimaprc</em>, change certificate path to
<em>/usr/local/opt/curl-ca-bundle/share/ca-bundle.crt</em> instead.</p>

<h4 id="mutt">Mutt</h4>

<p><em>~/.muttrc</em></p>

<figure class="highlight"><pre><code class="language-vim" data-lang="vim"> 
<span class="k">source</span> <span class="p">~</span><span class="sr">/.mutt/</span>accounts/First

folder<span class="p">-</span>hook First<span class="sr">/* source ~/</span><span class="p">.</span>mutt<span class="sr">/accounts/</span>First
folder<span class="p">-</span>hook Second<span class="sr">/* source ~/</span><span class="p">.</span>mutt<span class="sr">/accounts/</span>Second

macro <span class="nb">index</span> \e1  <span class="s2">"&lt;change-folder&gt; =First/INBOX&lt;enter&gt;"</span>
macro <span class="nb">index</span> \e2  <span class="s2">"&lt;change-folder&gt; =Second/INBOX&lt;enter&gt;"</span>

<span class="k">set</span> editor<span class="p">=</span><span class="s1">'vim'</span></code></pre></figure>

<p><em>~/.mutt/accounts/First</em></p>

<figure class="highlight"><pre><code class="language-vim" data-lang="vim"><span class="k">set</span> sendmail<span class="p">=</span><span class="s2">"msmtp-enqueue.sh -a First"</span>
<span class="k">set</span> envelope_from<span class="p">=</span>yes
<span class="k">set</span> from<span class="p">=</span><span class="s2">"name &lt;email-address&gt;"</span>
<span class="k">set</span> use_from<span class="p">=</span>yes
<span class="k">set</span> edit_headers<span class="p">=</span>yes

<span class="k">set</span> mbox_type<span class="p">=</span>Maildir
<span class="k">set</span> folder<span class="p">=~</span>/Mail
<span class="k">set</span> spoolfile<span class="p">=</span><span class="s2">"+First/INBOX"</span>
<span class="k">set</span> mbox<span class="p">=</span><span class="s2">"+First/[Gmail].All Mail"</span>
<span class="k">set</span> postponed<span class="p">=</span><span class="s2">"+First/[Gmail].Drafts"</span>
unset record
mailboxes <span class="p">+</span>First/INBOX

macro <span class="nb">index</span> D \
    <span class="c">"&lt;save-message&gt;+First/[Gmail].Bin&lt;enter&gt;" \</span>
    <span class="c">"move message to the trash"</span>

macro <span class="nb">index</span> S \
    <span class="c">"&lt;save-message&gt;+First/[Gmail].Spam&lt;enter&gt;" \</span>
    <span class="c">"mark message as spam"</span>

<span class="k">set</span> <span class="k">sort</span><span class="p">=</span>threads
<span class="k">set</span> sort_aux<span class="p">=</span><span class="k">last</span><span class="p">-</span>date<span class="p">-</span>received

<span class="k">source</span> <span class="p">~</span><span class="sr">/.mutt/</span>colour/mutt<span class="p">-</span>scheme<span class="p">.</span>muttrc</code></pre></figure>

<p><em>~/.mutt/accounts/Second</em></p>

<figure class="highlight"><pre><code class="language-vim" data-lang="vim"> 
<span class="k">set</span> sendmail<span class="p">=</span><span class="s2">"msmtp-enqueue.sh -a Second"</span>
<span class="k">set</span> envelope_from<span class="p">=</span>yes
<span class="k">set</span> from<span class="p">=</span><span class="s2">"name &lt;email-address&gt;"</span>
<span class="k">set</span> use_from<span class="p">=</span>yes
<span class="k">set</span> edit_headers<span class="p">=</span>yes

<span class="k">set</span> mbox_type<span class="p">=</span>Maildir
<span class="k">set</span> folder<span class="p">=~</span>/Mail
<span class="k">set</span> spoolfile<span class="p">=</span><span class="s2">"+Second/INBOX"</span>
<span class="k">set</span> mbox<span class="p">=</span><span class="s2">"+Second/[Gmail].All Mail"</span>
<span class="k">set</span> postponed<span class="p">=</span><span class="s2">"+Second/[Gmail].Drafts"</span>
unset record
mailboxes <span class="p">+</span>Second/INBOX

macro <span class="nb">index</span> D \
    <span class="c">"&lt;save-message&gt;+Second/[Gmail].Bin&lt;enter&gt;" \</span>
    <span class="c">"move message to the trash"</span>

macro <span class="nb">index</span> S \
    <span class="c">"&lt;save-message&gt;+Second/[Gmail].Spam&lt;enter&gt;" \</span>
    <span class="c">"mark message as spam"</span>

<span class="k">set</span> <span class="k">sort</span><span class="p">=</span>threads
<span class="k">set</span> sort_aux<span class="p">=</span><span class="k">last</span><span class="p">-</span>date<span class="p">-</span>received

<span class="k">source</span> <span class="p">~</span><span class="sr">/.mutt/</span>colour/mutt<span class="p">-</span>scheme<span class="p">.</span>muttrc</code></pre></figure>

<p><em>~/.mutt/colour/mutt-scheme.muttrc</em></p>

<figure class="highlight"><pre><code class="language-vim" data-lang="vim"># header
color header cyan black <span class="s2">"^from:"</span>
color header cyan black <span class="s2">"^to:"</span>
color header cyan black <span class="s2">"^cc:"</span>
color header cyan black <span class="s2">"^date:"</span>
color header cyan black <span class="s2">"^reply-to:"</span>
color header cyan black <span class="s2">"^subject:"</span>
color header cyan black <span class="s2">"^x-mailer:"</span>

# Default color definitions
color signature brightmagenta black
color indicator black cyan
color attachment yellow black
color error <span class="k">red</span> black
color message white black
color <span class="nb">search</span> brightwhite magenta
color status brightgreen blue
color tree <span class="k">red</span> black
color normal white black
color tilde green black
color <span class="nb">bold</span> brightyellow black
color markers <span class="k">red</span> black</code></pre></figure>

<h4 id="msmtpqueue">msmtpqueue</h4>

<p>Download and extract
<a href="http://sourceforge.net/projects/msmtp/files/msmtpqueue/">msmtpqueue</a> to
~/bin<br />
<br /></p>
<h3 id="wed-apr-30-2014">Wed, Apr 30, 2014</h3>

<h3 id="server-installation"><a name="server-1"></a>SERVER INSTALLATION</h3>

<h4 id="media-1">Media</h4>

<p>ISO available via Ubuntu Server 
<a href="http://www.ubuntu.com/download/server">download</a> page.</p>

<h4 id="installation">Installation</h4>

<p>Select language.<br />
Select location.</p>

<p>Configure keyboard:<br />
Detect keyboard: No<br />
Select origin and layout.</p>

<p>Enter hostname.<br />
Enter full name and username for new user.<br />
Enter password.<br />
Choose whether to encrypt home directory.<br />
Set time zone.<br />
Partition disks.<br />
Enter proxy if relevant, else leave blank and continue.<br />
Choose how to manage updates.</p>

<p>Software Selection:<br />
Basic Ubuntu server<br />
OpenSSH server<br />
Samba file server</p>

<p>Install boot loader.<br />
Reboot.</p>

<h4 id="static-ip-address">Static IP Address</h4>

<p>Ethernet:</p>

<p><em>/etc/network/interfaces</em></p>

<figure class="highlight"><pre><code class="language-vim" data-lang="vim">auto eth0
iface eth0 inet static
        address <span class="p">&lt;</span>ip<span class="p">-</span>address<span class="p">&gt;</span>
        netmask <span class="p">&lt;</span>netmask<span class="p">&gt;</span>
        network <span class="p">&lt;</span>network<span class="p">&gt;</span>
        broadcast <span class="p">&lt;</span>broadcast<span class="p">&gt;</span>
        gateway <span class="p">&lt;</span>gateway<span class="p">&gt;</span>
        dns<span class="p">-</span>nameservers <span class="p">&lt;</span>dns<span class="p">-</span>nameservers<span class="p">&gt;</span></code></pre></figure>

<p>Wireless:</p>

<p><em>/etc/network/interfaces</em></p>

<figure class="highlight"><pre><code class="language-vim" data-lang="vim">auto wlan0
iface wlan0 inet static
        address <span class="p">&lt;</span>ip<span class="p">-</span>address<span class="p">&gt;</span>
        netmask <span class="p">&lt;</span>netmask<span class="p">&gt;</span>
        network <span class="p">&lt;</span>network<span class="p">&gt;</span>
        broadcast <span class="p">&lt;</span>broadcast<span class="p">&gt;</span>
        gateway <span class="p">&lt;</span>gateway<span class="p">&gt;</span>
        dns<span class="p">-</span>nameservers <span class="p">&lt;</span>dns<span class="p">-</span>nameservers<span class="p">&gt;</span>
        wpa<span class="p">-</span>ssid <span class="p">&lt;</span>ssid<span class="p">&gt;</span>
        wpa<span class="p">-</span>psk <span class="p">&lt;</span>passphrase<span class="p">&gt;</span></code></pre></figure>

<p>Optional:<br />
Comment out interfaces if not required.</p>

<h4 id="update">Update</h4>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>apt-get update
<span class="nv">$ </span><span class="nb">sudo </span>apt-get upgrades
<span class="nv">$ </span><span class="nb">sudo </span>apt-get aptitude        <span class="c"># Useful if not already installed</span></code></pre></figure>

<p><br /></p>
<h3 id="samba-setup"><a name="samba-1"></a>SAMBA SETUP</h3>

<h4 id="directory-structure">Directory Structure</h4>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo mkdir</span> <span class="nt">-p</span> /shares/data          <span class="c"># data directory</span>
<span class="nv">$ </span><span class="nb">cd</span> /shares/data
<span class="nv">$ </span><span class="nb">sudo mkdir </span>daniel                   <span class="c"># home directory</span>
<span class="nv">$ </span><span class="nb">sudo </span>groupadd data
<span class="nv">$ </span><span class="nb">sudo chown </span>daniel:data daniel
<span class="nv">$ </span><span class="nb">chmod </span>o-rx daniel</code></pre></figure>

<h4 id="sysadmin">sysadmin</h4>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>useradd <span class="nt">-m</span> <span class="nt">-G</span> data <span class="nt">-s</span> /bin/bash sysadmin
<span class="nv">$ </span><span class="nb">sudo </span>passwd sysadmin</code></pre></figure>

<h3 id="config">Config</h3>

<p><em>/etc/samba/smb.conf</em></p>

<figure class="highlight"><pre><code class="language-vim" data-lang="vim">workgroup <span class="p">=</span> <span class="p">&lt;</span>workgroup<span class="p">-</span>name<span class="p">&gt;</span>
wins support <span class="p">=</span> yes
name <span class="nb">resolve</span> order <span class="p">=</span> lmhosts host wins bcast
security <span class="p">=</span> user

<span class="p">[</span>Data<span class="p">]</span>
comment <span class="p">=</span> Data
<span class="nb">path</span> <span class="p">=</span> <span class="sr">/shares/</span>data
browseable <span class="p">=</span> yes
<span class="k">read</span> <span class="k">only</span> <span class="p">=</span> yes
valid users <span class="p">=</span> sysadmin

<span class="p">[</span>Daniel<span class="p">]</span>
comment <span class="p">=</span> Daniel
<span class="nb">path</span> <span class="p">=</span> <span class="sr">/shares/</span>data/daniel
browseable <span class="p">=</span> yes
<span class="k">read</span> <span class="k">only</span> <span class="p">=</span> no
valid users <span class="p">=</span> daniel</code></pre></figure>

<p>Sets Samba password. I think smbpasswd ties in with passwd but needed in this
case since password was set prior to Samba installation.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>smbpasswd <span class="nt">-a</span> daniel</code></pre></figure>

<p><br /></p>
<h3 id="dlna"><a name="dlna-1"></a>DLNA</h3>

<h4 id="ps3-media-server">PS3 Media Server</h4>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>python-software-properties
<span class="nv">$ </span><span class="nb">sudo </span>add-apt-repository ppa:happy-neko/ps3mediaserver
<span class="nv">$ </span><span class="nb">sudo </span>apt-get update 
<span class="nv">$ </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>ps3mediaserver</code></pre></figure>

<h4 id="directory-structure-1">Directory Structure</h4>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo mkdir</span> <span class="nt">-p</span> /shares/stream        <span class="c"># stream directory</span>
<span class="nv">$ </span><span class="nb">cd</span> /shares
<span class="nv">$ </span><span class="nb">sudo </span>groupadd stream
<span class="nv">$ </span><span class="nb">sudo chgrp </span>stream stream
<span class="nv">$ </span><span class="nb">sudo chmod </span>g+w,o-rx stream
<span class="nv">$ </span><span class="nb">sudo </span>usermod <span class="nt">-a</span> <span class="nt">-G</span> stream daniel</code></pre></figure>

<h4 id="ps3">ps3</h4>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>useradd <span class="nt">-m</span> <span class="nt">-G</span> stream <span class="nt">-s</span> /bin/bash ps3
<span class="nv">$ </span><span class="nb">sudo </span>passwd ps3</code></pre></figure>

<h4 id="daemon">Daemon</h4>

<p><em>/etc/default/ps3mediaserver</em></p>

<figure class="highlight"><pre><code class="language-vim" data-lang="vim">PMS_START<span class="p">=</span><span class="s2">"yes"</span>
PMS_USER<span class="p">=</span><span class="s2">"ps3"</span>
PMS_PROFILE<span class="p">=</span><span class="s2">"/home/$PMS_USER/.config/ps3mediaserver"</span></code></pre></figure>

<h4 id="config-1">Config</h4>

<p><em>/etc/samba/smb.conf</em></p>

<figure class="highlight"><pre><code class="language-vim" data-lang="vim"><span class="p">[</span>Stream<span class="p">]</span>
comment <span class="p">=</span> Stream
<span class="nb">path</span> <span class="p">=</span> <span class="sr">/shares/</span>stream
browseable <span class="p">=</span> yes
<span class="k">read</span> <span class="k">only</span> <span class="p">=</span> no
valid users <span class="p">=</span> daniel</code></pre></figure>

<p><em>/home/ps3/.config/ps3mediaserver/PMS.conf</em></p>

<figure class="highlight"><pre><code class="language-vim" data-lang="vim">usecache <span class="p">=</span> false
hide_empty_folders <span class="p">=</span> true
folders <span class="p">=</span> <span class="sr">/shares/</span>stream</code></pre></figure>

<p>Remove <em>/home/ps3/.config/ps3mediaserver/WEB.conf</em></p>

<p>Reboot</p>

<p>Needed sometimes if media not playing, especially newly added.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>service ps3mediaserver restart</code></pre></figure>


  </div>

  
</article>

      </div>
    </main>

    <footer class="site-footer">
  
  <div class="wrapper">


    <div class="footer-col-wrapper">
      
      <div class="footer-col footer-col-1">
	      Copyright &copy; 2021 - Daniel Ngu
      </div>
    
    </div>

</footer>


  </body>

</html>
